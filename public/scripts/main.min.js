let game,lanewidth=200,score,scoreTick,invince,permaPause,gamespeed,spawnRate,spawnTick,halocount,recruitergot,pause=!0,objectList={};objectList.obstacle=[];let curObjects=[],collectedLogoList=[],effectQueue=[],startMenu=!0,can=document.getElementById("thecanvas"),ctx=can.getContext("2d");ctx.imageSmoothingEnabled=!1;let parcan=document.getElementById("particlecanvas"),parctx=can.getContext("2d");parctx.imageSmoothingEnabled=!1;let playerimgsrc="public/pfp.png",bgcan=document.getElementById("bgcanvas"),bgctx=bgcan.getContext("2d");bgctx.imageSmoothingEnabled=!1;let uost=document.getElementById("uost");function loadImages(){}function loadLogos(){for(let e=0;e<availibleCompanies.length;e++){let t=document.createElement("img");t.src=availibleCompanies[e].logoFile,availibleCompanies[e].logoImg=t}console.log(availibleCompanies)}function startGame(){let e=new Start;loadLogos();let t=setInterval(function(){startMenu||clearInterval(t);for(let c=0;c<objectList.length;c++);objectList.background.updateBG(),e.appear()},10);setupEnvironment()}function setupEnvironment(){permaPause=!1,score=1,scoreTick=0,invince=0,gamespeed=100,spawnRate=5e3,spawnTick=0,isNight=!1,recruitergot=!1,objectList={},curObjects=[],collectedLogoList=[],effectQueue=[],halocount=0,uost.currentTime=0,uost.volume=.1,uost.play(),ctx.clearRect(0,0,can.width,can.height),objectList.background=new Background(0,0,1200,1e3,"background"),objectList.character=new Character(500,700,200,200,"barrelidle","barrelmove","none"),objectList.obstacle=[];for(let e=0;e<1;e++)objectList.obstacle.push(new Recruiter(e,0,0,200,200,"recruiter","collect"));for(let t=0;t<availibleCompanies.length;t++)objectList.obstacle.push(new Card(t,0,0,200,200,"card",t,"collect"));for(let c=0;c<50;c++)objectList.obstacle.push(new Grass(c,0,0,200,200,"grass","trap"));for(let o=0;o<10;o++)objectList.obstacle.push(new Lefter(o,0,0,200,200,"lefter","trap"));for(let a=0;a<10;a++)objectList.obstacle.push(new Righter(a,0,0,200,200,"righter","trap"));for(let s=0;s<5;s++)objectList.obstacle.push(new Swinger(s,0,0,100,100,"swinger","trap"));for(let n=0;n<1;n++)objectList.obstacle.push(new Monkey(n,0,0,200,200,"monkey","trap"));for(let r=0;r<25;r++)objectList.obstacle.push(new Coin(r,0,0,200,200,"coin","collect"));for(let l=0;l<1;l++)objectList.obstacle.push(new Halo(l,0,0,200,200,"halo","collect"))}function resetGame(){pause=!1,setupEnvironment(),!(score>1)&&(clearInterval(game),game=setInterval(function(){if(!pause){addscore(),invince--,spawnTick>=spawnRate/10?(spawnObstacles(),spawnTick=0):spawnTick+=1+gamespeed/100,objectList.background.updateBG(),objectList.character.update(ctx);for(let e=0;e<curObjects.length;e++)curObjects[e].update(ctx),curObjects[e].y+curObjects[e].h>objectList.character.y+50&&objectList.character.y+objectList.character.h>curObjects[e].y+50&&curObjects[e].x+curObjects[e].w>objectList.character.x+10&&objectList.character.x+objectList.character.w>curObjects[e].x+10&&(curObjects[e].hit(),console.log("HIT"))}},10))}function dayNightCycle(){console.log(score%5),score%5==0&&(console.log(score%5),(isNight=!isNight)?$("#filter").animate({opacity:.5},1e3,"linear",function(){}):$("#filter").animate({opacity:0},1e3,"linear",function(){}))}function addscore(){++scoreTick%100==0&&(dayNightCycle(),gamespeed=100+10*++score);for(let e=1;e<5;e++)document.getElementById("number"+e).style["background-image"]="none";for(let t=1;t<score.toString().length+1;t++)document.getElementById("number"+t).style["background-image"]='url("public/images/'+score.toString().charAt(t-1)+'.png")'}function spawnObstacles(){console.log(objectList);let e=Math.floor(Math.random()*objectList.obstacle.length);objectList.obstacle[e].y=-200,objectList.obstacle[e].x=100+200*Math.floor(5*Math.random()),objectList.obstacle[e].oldX=objectList.obstacle[e].x,curObjects.push(objectList.obstacle[e]),objectList.obstacle.splice(e,1)}function settingDown(){document.getElementById("setting").style["background-image"]='url("public/images/settingdown.png")',pauseGame()}function settingUp(){document.getElementById("setting").style["background-image"]='url("public/images/setting.png")'}function restartDown(){document.getElementById("restart").classList.add("invisible"),objectList.background=new Background(0,0,1200,1e3,"background"),resetGame()}function restartUp(){document.getElementById("restart").style["background-image"]='url("public/images/restart.png")'}function startDown(){$("#start").animate({opacity:0},100,"linear",function(){document.getElementById("start").classList.add("invisible")}),startMenu=!1,resetGame()}function pauseGame(){permaPause||((pause=!pause)?(uost.pause(),ctx.fillStyle="black",ctx.globalAlpha=.5,ctx.fillRect(0,0,can.width,can.height)):(uost.play(),ctx.globalAlpha=1))}function die(){new Death().appear(),permaPause=!0,pause=!0,document.getElementById("diedsound").play(),uost.volume=.05,console.log({"Recruiter ":recruitergot,collectedLogoList:collectedLogoList,score:score,halocount:halocount})}function round(e,t,c){return Math.ceil((e-c)/t)*t+c}document.addEventListener("DOMContentLoaded",function(e){let t=document.getElementById("playerpfp"),c=new Image;c.onload=function(){t.src=c.src},c.src=playerimgsrc,objectList.background=new Background(0,0,1200,1e3,"background"),objectList.start=new Start,startGame(),spawnObstacles()});